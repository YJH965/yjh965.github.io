
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>[CSP-J 2021] 网络连接 题解（假） | 菜王的 blog</title>
<meta name="description" content="菜">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://yjh965.github.io/favicon.ico?v=1769938565157">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://yjh965.github.io/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="https://yjh965.github.io">
        <img class="avatar" src="https://yjh965.github.io/images/avatar.png?v=1769938565157" alt="" width="32px" height="32px">
      </a>
      <a href="https://yjh965.github.io">
        <h1 class="site-title">菜王的 blog</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="https://YJH965.github.io" class="menu purple-link">
            首页
          </a>
        
      
        
          <a href="https://YJH965.github.io/tags" class="menu purple-link">
            标签
          </a>
        
      
        
          <a class="menu purple-link" href="https://www.luogu.com.cn/user/477443" class="menu" target="_blank">
            My Luogu
          </a>
        
      
        
          <a class="menu purple-link" href="https://codeforces.com/profile/YuJiahe" class="menu" target="_blank">
            My CodeForces
          </a>
        
      
        
          <a class="menu purple-link" href="https://atcoder.jp/users/YuJiahe" class="menu" target="_blank">
            My AtCoder
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">[CSP-J 2021] 网络连接 题解（假）</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2023-04-16</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="https://yjh965.github.io/tag/snS5DT8z2/">
                    杂物
                    
                      ，
                    
                  </a>
                
                  <a href="https://yjh965.github.io/tag/LQ0w-t_P69/">
                    题解
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <h1 id="思路">思路</h1>
<p>恶心的模拟题。</p>
<p>但是比起<a href="https://www.luogu.com.cn/problem/P7073">这题</a>和<a href="https://www.luogu.com.cn/problem/P7075">这题</a>就好多了……</p>
<p>唯一要注意的只有一点：把 IP 转换成数字时，可能会很大，但是 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>25</mn></mrow><annotation encoding="application/x-tex">25</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">5</span></span></span></span> 位减去三个 <code>.</code>，一个 <code>:</code>，四个 <code>0</code>，刚好剩 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>18</mn></mrow><annotation encoding="application/x-tex">18</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">8</span></span></span></span> 位，<code>long long</code> 刚好能存！！！</p>
<p>而且，原本需要用 <code>map</code> 或哈希表优化查找过程，可是这个 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>≤</mo><mn>1</mn><msup><mn>0</mn><mn>3</mn></msup></mrow><annotation encoding="application/x-tex">n \le 10^3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7719400000000001em;vertical-align:-0.13597em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">3</span></span></span></span></span></span></span></span></span></span></span>，可以直接 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo>(</mo><msup><mi>n</mi><mn>2</mn></msup><mo>)</mo></mrow><annotation encoding="application/x-tex">O(n^2)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 查找。</p>
<h1 id="代码">代码</h1>
<pre><code class="language-cpp">#include &lt;algorithm&gt;
#include &lt;iostream&gt;
#include &lt;cstdio&gt;
#include &lt;string&gt;

using namespace std;

int n, cnt;
string op[1001], ad[1001];
long long toint(string s){ // 转换为数字
	long long x = 0;
	for (int i = 0;i &lt; s.size();i ++) x = x * 10 + (s[i] - '0');
	return x;
}
bool check(string s){
	int i, x;
	long long num;
	for (i = 0, x = 0;;){
		if (i &gt;= s.size()) return 0; // 不够读
		string nums;
		bool read = 0;
		while ('0' &lt;= s[i] &amp;&amp; s[i] &lt;= '9'){
			read = 1; // 读到了
			nums += s[i ++];
			if (i &gt;= s.size()) return 0; // 不够读
		}
		num = toint(nums); // 转换
		if (((nums[0] == '0' &amp;&amp; num &gt; 0) || (num == 0 &amp;&amp; nums.size() &gt; 1)) || !read) return 0; // 没读到或前导 0
		x ++;
		if (num &gt; 255 || num &lt; 0) return 0; // 超出范围
		if (x == 4) break; // 读够了
		if (s[i ++] != '.') return 0; // 符号不对
	}
	if (s[i ++] != ':') return 0; // 符号不对
	if (i &gt;= s.size()) return 0; // 不够读
	string nums;
	bool read = 0;
	while ('0' &lt;= s[i] &amp;&amp; s[i] &lt;= '9'){
		read = 1;
		nums += s[i ++];
		if (i &gt;= s.size()) break;
	}
	num = toint(nums);
	if (((nums[0] == '0' &amp;&amp; num &gt; 0) || (num == 0 &amp;&amp; nums.size() &gt; 1)) || !read) return 0;
	if (num &gt; 65535 || num &lt; 0) return 0; // 同上
	return 1; // 终于通过了……
}
int main(){
	cin &gt;&gt; n;
	for (int i = 1;i &lt;= n;i ++){
		cin &gt;&gt; op[i] &gt;&gt; ad[i];
		if (!check(ad[i])) cout &lt;&lt; &quot;ERR&quot; &lt;&lt; endl; // 不合法
		else {
			if (op[i] == &quot;Server&quot;){
				bool flg = 1;
				for (int j = 1;j &lt; i;j ++){ // 暴力查找
					if (op[j] == &quot;Server&quot; &amp;&amp; ad[j] == ad[i]){ // 有相同
						flg = 0;
						cout &lt;&lt; &quot;FAIL&quot; &lt;&lt; endl;
						break;
					}
				}
				if (flg) cout &lt;&lt; &quot;OK&quot; &lt;&lt; endl; // OK
			}
			else {
				bool flg = 1;
				for (int j = 1;j &lt; i;j ++){
					if (op[j] == &quot;Server&quot; &amp;&amp; ad[j] == ad[i]){ // 连接成功
						flg = 0;
						cout &lt;&lt; j &lt;&lt; endl;
						break;
					}
				}
				if (flg) cout &lt;&lt; &quot;FAIL&quot; &lt;&lt; endl; // 失败
			}
		}
	}
}
</code></pre>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="https://yjh965.github.io/post/csp-j-2021-xiao-xiong-de-guo-lan-ti-jie/">
              <h3 class="post-title">
                下一篇：[CSP-J 2021] 小熊的果篮 题解
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">菜</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a> | <a class="rss" href="https://yjh965.github.io/atom.xml" target="_blank">RSS</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
